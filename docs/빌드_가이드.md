# OctXXIII 빌드 가이드

## 🛠️ 빌드 환경 설정

### 필수 요구사항
- Python 3.8 이상
- pip (Python 패키지 관리자)
- Windows 10/11 (Windows 빌드용)

### 의존성 설치
```bash
pip install -r requirements.txt
pip install cx_Freeze
```

## 📦 실행파일 빌드 방법

### 방법 1: 자동 빌드 스크립트 사용 (권장)
```bash
python build_windows.py
```

이 스크립트는 다음 작업을 자동으로 수행합니다:
1. FFmpeg 다운로드 및 설정
2. 의존성 패키지 설치
3. 실행파일 빌드
4. MSI 설치파일 생성 (선택사항)

### 방법 2: 수동 빌드
```bash
# 1. FFmpeg 다운로드 (수동)
# https://ffmpeg.org/download.html 에서 Windows용 FFmpeg 다운로드
# ffmpeg/windows/ 폴더에 ffmpeg.exe, ffprobe.exe 복사

# 2. 실행파일 빌드
python setup.py build

# 3. 빌드 결과 확인
# build/exe.win-amd64-3.x/ 폴더에 실행파일 생성됨
```

## 🔧 빌드 설정 커스터마이징

### setup.py 수정
```python
# 아이콘 변경
icon="your_icon.ico"  # Windows용
icon="your_icon.icns"  # macOS용

# 실행파일 이름 변경
target_name="YourAppName.exe"

# 포함할 추가 파일
"include_files": [
    "resources_rc.py",
    "your_additional_file.txt",
]
```

### 빌드 옵션
```python
build_exe_options = {
    "packages": ["PyQt5", "yt_dlp", "requests"],
    "excludes": ["tkinter", "unittest"],  # 제외할 모듈
    "optimize": 2,  # 최적화 레벨 (0-2)
    "include_files": [...],  # 포함할 파일들
}
```

## 📁 빌드 결과물

### Windows 빌드
```
build/
└── exe.win-amd64-3.x/
    ├── OctXXIII.exe          # 메인 실행파일
    ├── ffmpeg.exe            # FFmpeg 바이너리
    ├── ffprobe.exe           # FFprobe 바이너리
    ├── lib/                  # Python 라이브러리들
    └── ...                   # 기타 의존성 파일들
```

### 배포용 패키지
```
OctXXIII_v2.0/
├── OctXXIII.exe
├── ffmpeg.exe
├── ffprobe.exe
├── 사용자_가이드.md
└── README.md
```

## 🚀 배포 준비

### 1. 실행파일 테스트
```bash
# 빌드된 실행파일 실행 테스트
cd build/exe.win-amd64-3.x/
./OctXXIII.exe
```

### 2. 의존성 확인
- FFmpeg가 올바르게 포함되었는지 확인
- 모든 기능이 정상 작동하는지 테스트
- 다양한 URL로 다운로드 테스트

### 3. 패키징
```bash
# 배포용 폴더 생성
mkdir OctXXIII_v2.0
cp build/exe.win-amd64-3.x/OctXXIII.exe OctXXIII_v2.0/
cp build/exe.win-amd64-3.x/ffmpeg.exe OctXXIII_v2.0/
cp build/exe.win-amd64-3.x/ffprobe.exe OctXXIII_v2.0/
cp 사용자_가이드.md OctXXIII_v2.0/
```

## 🔍 문제 해결

### 빌드 오류
1. **Python 버전 확인**: `python --version`
2. **의존성 재설치**: `pip install --upgrade -r requirements.txt`
3. **캐시 정리**: `pip cache purge`

### 실행 오류
1. **FFmpeg 경로**: 실행파일과 같은 폴더에 있어야 함
2. **권한 문제**: 관리자 권한으로 실행 시도
3. **바이러스 백신**: 실행파일이 차단되었는지 확인

### 성능 최적화
```python
# setup.py에서 최적화 옵션
build_exe_options = {
    "optimize": 2,  # 최대 최적화
    "excludes": ["tkinter", "unittest", "email", "http"],  # 불필요한 모듈 제외
}
```

## 📋 체크리스트

### 빌드 전 확인사항
- [ ] Python 3.8+ 설치됨
- [ ] 모든 의존성 설치됨
- [ ] FFmpeg 바이너리 준비됨
- [ ] 아이콘 파일 준비됨

### 빌드 후 확인사항
- [ ] 실행파일이 정상 실행됨
- [ ] 모든 기능이 작동함
- [ ] FFmpeg가 올바르게 포함됨
- [ ] 파일 크기가 적절함

## 🎯 고급 빌드 옵션

### PyInstaller 사용 (대안)
```bash
pip install pyinstaller
pyinstaller --windowed --icon=icon.ico --add-data "ffmpeg;ffmpeg" Nobody3.py
```

### cx_Freeze 고급 설정
```python
# 추가 모듈 포함
"includes": ["PyQt5.QtCore", "PyQt5.QtGui", "PyQt5.QtWidgets"],

# 숨겨진 임포트
"include_files": [
    ("hidden_imports.txt", "hidden_imports.txt"),
]
```

---

**빌드 성공을 위한 팁**:  
- 안정적인 인터넷 연결 유지
- 충분한 디스크 공간 확보 (최소 2GB)
- 바이러스 백신 일시 비활성화 고려
- 빌드 중 다른 프로그램 사용 최소화
